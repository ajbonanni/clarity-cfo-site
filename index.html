<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ClarityCFO.ai</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-storage-compat.js"></script>
</head>
<body class="bg-gray-50 text-gray-800">

<header class="bg-white shadow p-4 flex justify-between items-center">
  <h1 class="text-xl font-bold text-blue-600">ClarityCFO.ai</h1>
  <nav class="space-x-6 text-sm">
    <a href="#how-it-works" class="hover:text-blue-600">How It Works</a>
    <a href="#services" class="hover:text-blue-600">Services</a>
    <a href="#import-modeling" class="hover:text-blue-600">Modeling</a>
    <a href="#pricing" class="hover:text-blue-600">Pricing</a>
    <a href="#file-upload" class="hover:text-blue-600">AI Demo</a>
  </nav>
</header>

<section class="bg-blue-600 text-white py-20 px-6 text-center">
  <h1 class="text-4xl font-bold mb-4">Modern Finance. Automated. Scalable.</h1>
  <p class="mb-6 max-w-xl mx-auto">ClarityCFO blends senior CFO strategy with real-time AI tools. Cash flow, burn rate, board-ready reports â€” without hiring a finance team.</p>
  <a href="#file-upload" class="bg-white text-blue-600 font-semibold px-6 py-3 rounded">Get Your 5-Minute CFO Assessment â†’</a>
</section>

<section id="how-it-works" class="py-16 px-6 text-center">
  <h2 class="text-3xl font-bold mb-10">How It Works</h2>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
    <div><h3 class="text-xl font-bold mb-2">1. Onboard</h3><p>Connect QuickBooks, payroll, CRM. Weâ€™ll map your data in <strong>24 hours</strong>.</p></div>
    <div><h3 class="text-xl font-bold mb-2">2. Automate</h3><p>Agentic AI builds rolling forecasts, cash views, and alerts.</p></div>
    <div><h3 class="text-xl font-bold mb-2">3. Advise</h3><p>Monthly insights and founder coaching from real CFOs + live dashboards.</p></div>
  </div>
</section>

<section id="services" class="bg-gray-100 py-16 px-6 text-center">
  <h2 class="text-3xl font-bold mb-10">Our Services</h2>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto text-left text-sm">
    <div><h4 class="font-semibold mb-2">AR/AP Automation</h4><p>Auto-highlight slow payers, optimize vendors, cut overhead.</p></div>
    <div><h4 class="font-semibold mb-2">Board + Investor Reporting</h4><p>Auto-generate updates, decks, and metrics for your next raise.</p></div>
    <div><h4 class="font-semibold mb-2">Real-Time Cash Flow</h4><p>Live dashboards and alerts to extend runway confidently.</p></div>
    <div><h4 class="font-semibold mb-2">Scenario Planning</h4><p>Hiring ramp? Pricing change? See impact before acting.</p></div>
    <div><h4 class="font-semibold mb-2">Forecasting + Burn</h4><p>Month-to-month clarity with automated CFO-grade projections.</p></div>
    <div><h4 class="font-semibold mb-2">Capital Raise Prep</h4><p>We model it, narrate it, and help you close it.</p></div>
  </div>
</section>

<section id="import-modeling" class="py-16 px-6 text-center bg-white">
  <h2 class="text-3xl font-bold mb-6">Import & Modeling</h2>
  <p class="max-w-3xl mx-auto text-gray-700 mb-4">
    Upload .csv, .xlsx, or .pdf files from QuickBooks, NetSuite, or SAP. ClarityCFOâ€™s AI reads your data, detects revenue/expense patterns, forecasts burn, and generates financial narratives â€” no setup needed.
  </p>
  <a href="#file-upload" class="inline-block bg-blue-600 text-white px-6 py-3 rounded hover:bg-blue-700">
    Jump to Upload Tool â†’
  </a>
</section>

<section id="pricing" class="py-16 px-6 text-center bg-white">
  <h2 class="text-3xl font-bold mb-10">Pricing</h2>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto text-left">
    <div class="p-6 border rounded shadow">
      <h3 class="text-xl font-bold mb-2">Starter</h3>
      <p class="text-sm mb-4">Pre-revenue teams</p>
      <ul class="text-sm list-disc list-inside mb-4">
        <li>Cash dashboard</li>
        <li>Email alerts</li>
        <li>Burn summary</li>
      </ul>
      <p class="font-bold">$199/mo</p>
    </div>
    <div class="p-6 border rounded shadow">
      <h3 class="text-xl font-bold mb-2">Growth</h3>
      <p class="text-sm mb-4">VC-backed companies</p>
      <ul class="text-sm list-disc list-inside mb-4">
        <li>Scenario builder</li>
        <li>Rolling forecasts</li>
        <li>Board packs</li>
      </ul>
      <p class="font-bold">$499/mo</p>
    </div>
    <div class="p-6 border rounded shadow">
      <h3 class="text-xl font-bold mb-2">Enterprise</h3>
      <p class="text-sm mb-4">Multi-entity or pre-IPO</p>
      <ul class="text-sm list-disc list-inside mb-4">
        <li>Dedicated CFO partner</li>
        <li>Fundraising support</li>
        <li>Custom KPIs + visuals</li>
      </ul>
      <p class="font-bold">Custom Quote</p>
    </div>
  </div>
</section>

<section id="file-upload" class="bg-gray-50 py-16 px-6">
  <div class="max-w-xl mx-auto text-center">
    <h3 class="text-3xl font-bold mb-6">Upload Your Financials</h3>
    <p class="mb-4">We support .csv, .xlsx, and .pdf â€” exported from your accounting system.</p>
    <input type="file" id="fileInput" class="block w-full p-3 border rounded mb-4" accept=".csv,.xlsx,.pdf"/>
    <button onclick="uploadFile()" class="bg-blue-600 text-white px-6 py-3 rounded">Upload File</button>
    <p id="uploadStatus" class="mt-4 text-green-600 hidden"></p>
    <div id="diagnosticResults" class="mt-6 p-4 bg-yellow-50 border border-yellow-300 rounded text-yellow-900 hidden"></div>
    <div id="aiNarrative" class="mt-6 text-sm italic text-gray-600 hidden"></div>
  </div>
</section>

<footer class="bg-gray-900 text-white py-6 text-center text-sm">
  &copy; 2025 ClarityCFO.ai Â· All rights reserved.
</footer>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCfYTgv1MVWfDezRV-i00oL9ca3f56auFc",
    authDomain: "clarity-cfo.firebaseapp.com",
    projectId: "clarity-cfo",
    storageBucket: "clarity-cfo.firebasestorage.app",
    messagingSenderId: "744282604632",
    appId: "1:744282604632:web:33f064b034e82a9c40f62d"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const storage = firebase.storage();

  async function getGenAIDiagnostics(data) {
    try {
      const response = await fetch("/api/diagnose", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
      });

      return await response.json();
    } catch (error) {
      console.error("ðŸ›‘ Diagnostic API Error:", error);
      return {
        flags: ["âš ï¸ AI diagnostic unavailable"],
        summary: "AI failed to analyze your file. Please try again later.",
        narrative: "No narrative available."
      };
    }
  }

  function uploadFile() {
    const fileInput = document.getElementById("fileInput");
    const file = fileInput.files[0];
    const uploadStatus = document.getElementById("uploadStatus");
    const diagnosticBox = document.getElementById("diagnosticResults");
    const aiNarrative = document.getElementById("aiNarrative");

    uploadStatus.classList.add("hidden");
    diagnosticBox.classList.add("hidden");
    aiNarrative.classList.add("hidden");
    uploadStatus.innerHTML = "";
    diagnosticBox.innerHTML = "";
    aiNarrative.innerHTML = "";

    if (!file) {
      alert("Please select a file.");
      return;
    }

    const ext = file.name.toLowerCase().split('.').pop();
    uploadStatus.textContent = "â³ Uploading...";
    uploadStatus.classList.remove("hidden");

    if (ext === "csv") {
      Papa.parse(file, {
        header: true,
        skipEmptyLines: true,
        complete: (results) => handleFinancialData(results.data, file.name)
      });
    } else if (ext === "xlsx") {
      const reader = new FileReader();
      reader.onload = function(e) {
        const wb = XLSX.read(e.target.result, { type: 'array' });
        const data = XLSX.utils.sheet_to_json(wb.Sheets[wb.SheetNames[0]]);
        handleFinancialData(data, file.name);
      };
      reader.readAsArrayBuffer(file);
    } else if (ext === "pdf") {
      const ref = storage.ref().child("uploads/" + file.name);
      ref.put(file).then(() => {
        uploadStatus.textContent = "ðŸ“„ PDF uploaded to Firebase Storage.";
      }).catch(() => {
        uploadStatus.textContent = "âŒ Failed to upload PDF.";
      });
    } else {
      uploadStatus.textContent = "âŒ Unsupported file type.";
    }

    fileInput.value = "";
  }

  async function handleFinancialData(data, filename) {
    let revenue = 0, expenses = 0;
    data.forEach(row => {
      const name = row["Account"]?.toLowerCase();
      const amount = parseFloat(row["Amount"] || row["Value"] || 0);
      if (name?.includes("revenue")) revenue += amount;
      if (name?.includes("expense")) expenses += amount;
    });

    const burn = expenses - revenue;
    const format = n => n.toLocaleString('en-US', { style: 'currency', currency: 'USD' });

    document.getElementById("uploadStatus").textContent =
      `ðŸ“Š Revenue: ${format(revenue)} | Expenses: ${format(expenses)} | Burn: ${format(burn)} âœ… File successfully uploaded`;

    const diagnostics = await getGenAIDiagnostics({ revenue, expenses, burn, filename });

    const diagnosticBox = document.getElementById("diagnosticResults");
    diagnosticBox.classList.remove("hidden");
    diagnosticBox.innerHTML = `
      <h4 class="font-bold mb-2">AI Diagnostic Summary:</h4>
      <ul class="list-disc list-inside">
        ${diagnostics.flags.map(f => `<li>${f}</li>`).join("")}
      </ul>
      <p class="mt-2 text-sm text-gray-700">${diagnostics.summary}</p>
    `;

    const aiNarrative = document.getElementById("aiNarrative");
    aiNarrative.textContent = `ðŸ§  GPT Insight: ${diagnostics.narrative}`;
    aiNarrative.classList.remove("hidden");

    db.collection("financial_uploads").add({
      filename, revenue, expenses, burn,
      flags: diagnostics.flags,
      summary: diagnostics.summary,
      narrative: diagnostics.narrative,
      timestamp: firebase.firestore.FieldValue.serverTimestamp()
    });
  }
</script>
</body>
</html>
